<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NightVibe | Anonymous Social</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="landing-page">
    <!-- Animated Background -->
    <div class="background-animation">
        <div class="particles"></div>
        <div class="gradient-overlay"></div>
    </div>
    
    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Panel - App Info -->
        <div class="app-info-panel">
            <div class="logo">
                <i class="fas fa-mask"></i>
                <h1>NightVibe</h1>
            </div>
            <div class="tagline">
                <h2>Connect Anonymously. Chat Freely.</h2>
                <p>Your secret social space where identities are hidden but connections are real.</p>
            </div>
            
            <div class="features">
                <div class="feature">
                    <i class="fas fa-user-secret"></i>
                    <span>100% Anonymous Messaging</span>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <span>End-to-End Privacy</span>
                </div>
                <div class="feature">
                    <i class="fas fa-users"></i>
                    <span>Verified Community</span>
                </div>
                <div class="feature">
                    <i class="fas fa-photo-video"></i>
                    <span>Rich Profile System</span>
                </div>
            </div>
        </div>
        
        <!-- Right Panel - Authentication -->
        <div class="auth-panel">
            <!-- Tab Navigation -->
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="switchTab('login')">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                <button class="tab-btn" onclick="switchTab('register')">
                    <i class="fas fa-user-plus"></i> Register
                </button>
            </div>
            
            <!-- Login Form -->
            <div id="login-tab" class="auth-form active">
                <h2>Welcome Back</h2>
                <p class="form-subtitle">Enter your secret credentials</p>
                
                <form id="loginForm">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="loginUsername" placeholder="Username" required>
                    </div>
                    
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="Password" required>
                        <button type="button" class="show-password" onclick="togglePassword('loginPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="forgot-link">Forgot Password?</a>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-unlock"></i> Access Dashboard
                    </button>
                </form>
            </div>
            
            <!-- Registration Form -->
            <div id="register-tab" class="auth-form">
                <h2>Join the Vibe</h2>
                <p class="form-subtitle">Create your anonymous profile</p>
                
                <form id="registerForm">
                    <!-- Step 1: Basic Info -->
                    <div class="form-step active" id="step1">
                        <h3>Basic Information</h3>
                        
                        <div class="input-group">
                            <i class="fas fa-user-tag"></i>
                            <input type="text" id="username" placeholder="Choose a username" required>
                        </div>
                        
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" placeholder="Create a password" required>
                            <button type="button" class="show-password" onclick="togglePassword('password')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="realName" placeholder="Real name (admin only)" required>
                        </div>
                        
                        <div class="input-group">
                            <i class="fas fa-phone"></i>
                            <input type="tel" id="phone" placeholder="Phone number" required>
                        </div>
                        
                        <button type="button" class="next-btn" onclick="nextStep(2)">
                            Continue <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <!-- Step 2: Profile Details -->
                    <div class="form-step" id="step2">
                        <h3>Profile Details</h3>
                        
                        <div class="input-group">
                            <i class="fas fa-birthday-cake"></i>
                            <input type="number" id="age" min="18" max="65" placeholder="Age" required>
                        </div>
                        
                        <div class="select-group">
                            <i class="fas fa-venus-mars"></i>
                            <select id="position" required>
                                <option value="">Position Preference</option>
                                <option value="T">T (Top)</option>
                                <option value="TV">TV (Versatile Top)</option>
                                <option value="V">V (Versatile)</option>
                                <option value="BV">BV (Versatile Bottom)</option>
                                <option value="B">B (Bottom)</option>
                            </select>
                        </div>
                        
                        <div class="select-group">
                            <i class="fas fa-heart"></i>
                            <select id="relationshipStatus" required>
                                <option value="">Relationship Status</option>
                                <option value="Single">Single: Unattached</option>
                                <option value="Dating">Dating: Actively seeing someone</option>
                                <option value="Engaged">Engaged: Pre-marriage commitment</option>
                                <option value="Married">Married: Legally bound</option>
                                <option value="Separated">Separated: Legally or physically apart from spouse</option>
                                <option value="Divorced">Divorced: Marriage officially ended</option>
                                <option value="Widowed">Widowed: Spouse has passed away</option>
                                <option value="ItsComplicated">It's Complicated: Vague</option>
                                <option value="Situationship">Situationship: Unclear, undefined connection</option>
                                <option value="FWB">Friends with Benefits (FWB)</option>
                                <option value="CasualDating">Casual Dating: Seeing someone without exclusivity</option>
                                <option value="Exclusive">Exclusive: Committed but not married/engaged</option>
                                <option value="OpenRelationship">Open Relationship</option>
                                <option value="Polyamorous">Polyamorous: Consensual multiple relationships</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <i class="fas fa-heartbeat"></i>
                            <textarea id="iamInto" placeholder="I am into... (interests, hobbies, preferences)" rows="3"></textarea>
                            <div class="char-counter">0/500</div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="back-btn" onclick="prevStep(1)">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button type="submit" class="submit-btn">
                                <i class="fas fa-check"></i> Complete Registration
                            </button>
                        </div>
                    </div>
                    
                    <!-- Progress Indicator -->
                    <div class="progress-indicator">
                        <div class="progress-step active">1</div>
                        <div class="progress-line"></div>
                        <div class="progress-step">2</div>
                    </div>
                </form>
            </div>
            
            <div class="auth-footer">
                <p>By continuing, you agree to our <a href="#">Privacy Policy</a> and <a href="#">Terms of Service</a></p>
                <p>18+ Only. All users are verified.</p>
            </div>
        </div>
    </div>
    
    <!-- Load Firebase v8 SDK (NOT v9 with modules) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <!-- Your Firebase configuration -->
    <script src="firebase-config.js"></script>
    
    <!-- Your main app script -->
    <script src="app.js"></script>
    
    <script>
        // Tab switching for login/register
        function switchTab(tabName) {
            // Update tabs
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            if (tabName === 'login') {
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
                document.getElementById('login-tab').classList.add('active');
            } else {
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
                document.getElementById('register-tab').classList.add('active');
            }
        }
        
        // Multi-step form navigation
        function nextStep(step) {
            document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + step).classList.add('active');
            
            // Update progress indicator
            document.querySelectorAll('.progress-step').forEach((el, index) => {
                if (index < step) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active');
                }
            });
        }
        
        function prevStep(step) {
            nextStep(step);
        }
        
        // Toggle password visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = input.nextElementSibling.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }
        
        // Character counter for textarea
        document.getElementById('iamInto')?.addEventListener('input', function() {
            const counter = this.parentElement.querySelector('.char-counter');
            if (counter) {
                const length = this.value.length;
                counter.textContent = length + '/500';
                counter.className = 'char-counter ' + 
                    (length > 450 ? 'warning' : length > 495 ? 'error' : '');
            }
        });
        // Validate Step 1 before proceeding
function validateStep1() {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    const realName = document.getElementById('realName').value.trim();
    const phone = document.getElementById('phone').value.trim();
    
    let isValid = true;
    let errorMessage = '';
    
    // Clear previous error styles
    document.querySelectorAll('.input-group').forEach(group => {
        group.classList.remove('error');
    });
    
    // Validate username
    if (!username) {
        document.getElementById('username').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Username is required';
    } else if (username.length < 3) {
        document.getElementById('username').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Username must be at least 3 characters';
    }
    
    // Validate password
    if (!password) {
        document.getElementById('password').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Password is required';
    } else if (password.length < 6) {
        document.getElementById('password').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Password must be at least 6 characters';
    }
    
    // Validate real name
    if (!realName) {
        document.getElementById('realName').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Real name is required';
    }
    
    // Validate phone
    if (!phone) {
        document.getElementById('phone').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Phone number is required';
    } else if (phone.length < 10) {
        document.getElementById('phone').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Please enter a valid phone number';
    }
    
    if (!isValid) {
        showNotification(errorMessage, 'error');
        return;
    }
    
    // If all valid, proceed to step 2
    nextStep(2);
}

// Submit registration (called from Step 2 button)
function submitRegistration() {
    // Manually trigger validation for step 2 fields
    const age = document.getElementById('age').value;
    const position = document.getElementById('position').value;
    const relationshipStatus = document.getElementById('relationshipStatus').value;
    
    let isValid = true;
    let errorMessage = '';
    
    // Clear previous error styles
    document.querySelectorAll('.input-group, .select-group').forEach(group => {
        group.classList.remove('error');
    });
    
    // Validate age
    if (!age) {
        document.getElementById('age').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Age is required';
    } else if (age < 18 || age > 65) {
        document.getElementById('age').parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Age must be between 18 and 65';
    }
    
    // Validate position
    if (!position) {
        document.getElementById('position').parentElement.parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Position preference is required';
    }
    
    // Validate relationship status
    if (!relationshipStatus) {
        document.getElementById('relationshipStatus').parentElement.parentElement.classList.add('error');
        isValid = false;
        errorMessage = 'Relationship status is required';
    }
    
    if (!isValid) {
        showNotification(errorMessage, 'error');
        return;
    }
    
    // If all valid, call the existing handleRegistration function
    const event = { preventDefault: () => {} };
    handleRegistration(event);
}

// Update the nextStep and prevStep functions
function nextStep(step) {
    // Hide all steps
    document.querySelectorAll('.form-step').forEach(s => {
        s.style.display = 'none';
        s.classList.remove('active');
    });
    
    // Show current step
    const currentStep = document.getElementById('step' + step);
    if (currentStep) {
        currentStep.style.display = 'block';
        currentStep.classList.add('active');
    }
    
    // Update progress indicator
    document.querySelectorAll('.progress-step').forEach((el, index) => {
        if (index < step - 1) {
            el.classList.add('active');
        } else {
            el.classList.remove('active');
        }
    });
}

function prevStep() {
    nextStep(1);
}

// Also update the existing togglePassword function to handle errors
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const icon = input.nextElementSibling.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
    } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
    }
    
    // Clear error state when user interacts
    input.parentElement.classList.remove('error');
}
        // Make functions globally available
        window.switchTab = switchTab;
        window.nextStep = nextStep;
        window.prevStep = prevStep;
        window.togglePassword = togglePassword;
    </script>
</body>
</html>